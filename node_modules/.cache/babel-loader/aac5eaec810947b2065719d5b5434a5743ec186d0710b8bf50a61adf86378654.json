{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\nimport { ref, onMounted } from 'vue';\nimport { useRouter } from 'vue-router';\nimport { postAPI } from '@/api';\nexport default {\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n  setup(props) {\n    const router = useRouter();\n    const post = ref(null);\n    const form = ref({\n      id: '',\n      // id 필드 추가\n      title: '',\n      content: ''\n    });\n    const fetchPost = async () => {\n      try {\n        const response = await postAPI.getPost(props.id);\n        post.value = response.data;\n        form.value = {\n          id: Number(props.id),\n          title: response.data.title,\n          content: response.data.content\n        };\n      } catch (error) {\n        console.error('게시글 조회 실패:', error);\n      }\n    };\n    const handleSubmit = async () => {\n      try {\n        console.log(form.value);\n        await postAPI.updatePost(form.value);\n        router.push(`/posts/${props.id}`);\n      } catch (error) {\n        console.error('게시글 수정 실패:', error);\n        if (error.response) {\n          console.log('Error Data:', error.response.data);\n          console.log('Error Status:', error.response.status);\n          console.log('Error Headers:', error.response.headers);\n        }\n      }\n    };\n    onMounted(() => {\n      fetchPost();\n    });\n    return {\n      post,\n      form,\n      handleSubmit\n    };\n  }\n};","map":{"version":3,"names":["ref","onMounted","useRouter","postAPI","props","id","type","String","required","setup","router","post","form","title","content","fetchPost","response","getPost","value","data","Number","error","console","handleSubmit","log","updatePost","push","status","headers"],"sources":["/Users/user/Developer/boardpj/boardpjcli/src/components/PostEdit.vue"],"sourcesContent":["<template>\n  <div class=\"container mt-4\">\n    <div class=\"d-flex justify-content-between align-items-center mb-4\">\n      <h2>게시글 수정</h2>\n    </div>\n    <div class=\"card\">\n      <div class=\"card-body\">\n        <form @submit.prevent=\"handleSubmit\" v-if=\"post\">\n          <div class=\"mb-3\">\n            <label class=\"form-label\">제목</label>\n            <input v-model=\"form.title\" type=\"text\" class=\"form-control\" required>\n          </div>\n          <div class=\"mb-3\">\n            <label class=\"form-label\">내용</label>\n            <textarea v-model=\"form.content\" class=\"form-control\" rows=\"5\" required></textarea>\n          </div>\n          <div class=\"d-flex justify-content-between\">\n            <router-link :to=\"'/posts/' + id\" class=\"btn btn-secondary\">취소</router-link>\n            <button type=\"submit\" class=\"btn btn-primary\">수정</button>\n          </div>\n        </form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport { ref, onMounted } from 'vue'\nimport { useRouter } from 'vue-router'\nimport { postAPI } from '@/api'\n\nexport default {\n  props: {\n    id: {\n      type: String,\n      required: true\n    }\n  },\n\n\n  setup(props) {\n    const router = useRouter()\n    const post = ref(null)\n    const form = ref({\n      id: '',  // id 필드 추가\n      title: '',\n      content: ''\n    })\n\n    const fetchPost = async () => {\n      try {\n        const response = await postAPI.getPost(props.id)\n        post.value = response.data\n        form.value = {\n          id: Number(props.id),\n          title: response.data.title,\n          content: response.data.content\n        }\n      } catch (error) {\n        console.error('게시글 조회 실패:', error)\n      }\n    }\n\n    const handleSubmit = async () => {\n      try {\n        console.log(form.value)\n        await postAPI.updatePost(form.value)\n        router.push(`/posts/${props.id}`)\n      } catch (error) {\n        console.error('게시글 수정 실패:', error)\n        if (error.response) {\n          console.log('Error Data:', error.response.data)\n          console.log('Error Status:', error.response.status)\n          console.log('Error Headers:', error.response.headers)\n        }\n      }\n    }\n\n    onMounted(() => {\n      fetchPost()\n    })\n\n    return {\n      post,\n      form,\n      handleSubmit\n    }\n  }\n}\n</script>"],"mappings":";AA2BA,SAASA,GAAG,EAAEC,SAAQ,QAAS,KAAI;AACnC,SAASC,SAAQ,QAAS,YAAW;AACrC,SAASC,OAAM,QAAS,OAAM;AAE9B,eAAe;EACbC,KAAK,EAAE;IACLC,EAAE,EAAE;MACFC,IAAI,EAAEC,MAAM;MACZC,QAAQ,EAAE;IACZ;EACF,CAAC;EAGDC,KAAKA,CAACL,KAAK,EAAE;IACX,MAAMM,MAAK,GAAIR,SAAS,CAAC;IACzB,MAAMS,IAAG,GAAIX,GAAG,CAAC,IAAI;IACrB,MAAMY,IAAG,GAAIZ,GAAG,CAAC;MACfK,EAAE,EAAE,EAAE;MAAG;MACTQ,KAAK,EAAE,EAAE;MACTC,OAAO,EAAE;IACX,CAAC;IAED,MAAMC,SAAQ,GAAI,MAAAA,CAAA,KAAY;MAC5B,IAAI;QACF,MAAMC,QAAO,GAAI,MAAMb,OAAO,CAACc,OAAO,CAACb,KAAK,CAACC,EAAE;QAC/CM,IAAI,CAACO,KAAI,GAAIF,QAAQ,CAACG,IAAG;QACzBP,IAAI,CAACM,KAAI,GAAI;UACXb,EAAE,EAAEe,MAAM,CAAChB,KAAK,CAACC,EAAE,CAAC;UACpBQ,KAAK,EAAEG,QAAQ,CAACG,IAAI,CAACN,KAAK;UAC1BC,OAAO,EAAEE,QAAQ,CAACG,IAAI,CAACL;QACzB;MACF,EAAE,OAAOO,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,YAAY,EAAEA,KAAK;MACnC;IACF;IAEA,MAAME,YAAW,GAAI,MAAAA,CAAA,KAAY;MAC/B,IAAI;QACFD,OAAO,CAACE,GAAG,CAACZ,IAAI,CAACM,KAAK;QACtB,MAAMf,OAAO,CAACsB,UAAU,CAACb,IAAI,CAACM,KAAK;QACnCR,MAAM,CAACgB,IAAI,CAAC,UAAUtB,KAAK,CAACC,EAAE,EAAE;MAClC,EAAE,OAAOgB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,YAAY,EAAEA,KAAK;QACjC,IAAIA,KAAK,CAACL,QAAQ,EAAE;UAClBM,OAAO,CAACE,GAAG,CAAC,aAAa,EAAEH,KAAK,CAACL,QAAQ,CAACG,IAAI;UAC9CG,OAAO,CAACE,GAAG,CAAC,eAAe,EAAEH,KAAK,CAACL,QAAQ,CAACW,MAAM;UAClDL,OAAO,CAACE,GAAG,CAAC,gBAAgB,EAAEH,KAAK,CAACL,QAAQ,CAACY,OAAO;QACtD;MACF;IACF;IAEA3B,SAAS,CAAC,MAAM;MACdc,SAAS,CAAC;IACZ,CAAC;IAED,OAAO;MACLJ,IAAI;MACJC,IAAI;MACJW;IACF;EACF;AACF","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}